# FastAPI service template configuration
author_name:
  type: str
  help: Author's name
  default: Marc Streeter

author_email:
  type: str
  help: Author's email
  default: marc@marcstreeter.dev

project_name:
  type: str
  help: What is your project name?
  default: marcstreeterdev-fastapi

project_slug:
  type: str
  help: Slugified project name
  default: "{{ project_name.lower().replace('-', '_').replace(' ', '_') }}"
  when: false

project_kebab:
  type: str
  help: Kebabified project name
  default: "{{ project_slug.replace('_', '-')}}"
  when: false

project_chart:
  type: str
  help: Chart name
  default: "{{ project_kebab }}-app"
  when: false

project_interface:
  type: str
  help: Interface Service name
  default: "{{ project_kebab }}-interface"
  when: false

project_configmap:
  type: str
  help: ConfigMap name
  default: "{{ project_chart }}-config"
  when: false

project_type:
  type: str
  help: Type of project
  default: fastapi
  when: false

project_description:
  type: str
  help: Short description of the project
  default: "A {{ project_type }} service for {{ project_name}} by {{ author_name }}"

project_env_vars:
  type: str
  help: |
    Enter environment variable names (space or comma-separated).
    Optionally include example values using KEY=value format.
    EXAMPLES:
      - Simple: 'DATABASE_URL API_KEY SECRET_TOKEN'
      - With Samples: 'API_KEY=sample_key SECRET_TOKEN=sample_token'
      - Mixed: 'DATABASE_URL=postgresql://localhost/db API_KEY SECRET_TOKEN'
    NOTE: this populates a `.env.sample` file
    --------------------------------------
    ENTER YOUR ENVIRONMENT VARIABLES BELOW            
    --------------------------------------
  default: ""

github_username:
  type: str
  help: GitHub username
  default: marcstreeter

github_repo:
  type: str
  help: GitHub repository name
  default: "/{{ project_kebab }}/"

python_version:
  type: str
  help: Python version to use
  default: "3.11"
  when: false

python_version_full:
  type: str
  help: Full version of Python to use where available
  default: "{{ python_version }}.14"
  when: false

api_port:
  type: int
  help: What port should the API service run on?
  default: 8000
  when: false

api_port_name:
  type: str
  help: Name for the API service port
  default: http
  when: false

api_port_debug:
  type: int
  help: Port for the API debug service
  default: 5678
  when: false

api_port_debug_name:
  type: str
  help: Name for the API debug service port
  default: debug
  when: false

feature_gcp_enabled:
  type: bool
  help: Enable GCP features
  default: false

tilt_api_port:
  type: int
  help: Port for Tilt to forward the interface to
  default: 18080
  validator: >-
    {%- if tilt_api_port < 10000 or tilt_api_port > 20000 -%}
    API port must be between 10000 and 20000
    {%- endif -%}

tilt_api_debug_port:
  type: int
  help: Port for Tilt to forward the API service to
  default: "{{ tilt_api_port + 5 }}"
  validator: >-
    {%- if tilt_api_debug_port < 10000 or tilt_api_debug_port > 20000 -%}
    API port must be between 10000 and 20000
    {%- elif tilt_api_debug_port == tilt_api_port -%}
    API DEBUG port cannot be the same as API port ({{ tilt_api_port }})
    {%- endif -%}